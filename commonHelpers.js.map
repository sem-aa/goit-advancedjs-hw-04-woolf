{"version":3,"file":"commonHelpers.js","sources":["../src/js/api.js","../src/js/main.js"],"sourcesContent":["import axios from 'axios';\r\n\r\naxios.defaults.baseURL = 'https://pixabay.com/api/';\r\nconst KEY = '41181401-cfbb9dc400356a899a7dc1037';\r\nexport const PER_PAGE = 40;\r\n\r\nexport const searchImg = (query, page) =>\r\n  axios\r\n    .get(\r\n      `?key=${KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${PER_PAGE}`\r\n    )\r\n    .then(data => data.data);\r\n","import SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\nimport { PER_PAGE, searchImg } from './api';\r\nconst form = document.querySelector('.search-form');\r\nconst input = document.querySelector('[name=\"searchQuery\"]');\r\nconst gallery = document.querySelector('.gallery');\r\nconst loadMoreBtn = document.querySelector('.load-more');\r\n\r\nloadMoreBtn.style.display = 'none';\r\nconst simplelightbox = new SimpleLightbox('.gallery a');\r\n\r\nlet page = 0;\r\nconst warningMessage = {\r\n  message:\r\n    'Sorry, there are no images matching your search query. Please try again.',\r\n  color: 'red',\r\n  position: 'center',\r\n};\r\n\r\nform.addEventListener('submit', async e => {\r\n  e.preventDefault();\r\n  gallery.innerHTML = '';\r\n  page += 1;\r\n  const arrImgs = await searchImg(input.value, page);\r\n\r\n  if (!arrImgs.hits.length) {\r\n    iziToast.show(warningMessage);\r\n    return;\r\n  } else {\r\n    iziToast.show({\r\n      message: `Hooray! We found ${arrImgs.totalHits} images.`,\r\n      position: 'topRight',\r\n      color: 'green',\r\n    });\r\n  }\r\n\r\n  if (arrImgs.hits.length === PER_PAGE) {\r\n    loadMoreBtn.style.display = 'block';\r\n  } else loadMoreBtn.style.display = 'none';\r\n\r\n  const markup = createMarkup(arrImgs);\r\n  gallery.insertAdjacentHTML('beforeend', markup);\r\n  simplelightbox.refresh();\r\n});\r\n\r\ninput.addEventListener('input', () => {\r\n  page = 0;\r\n});\r\n\r\nloadMoreBtn.addEventListener('click', async () => {\r\n  page += 1;\r\n  const arrImgs = await searchImg(input.value, page);\r\n\r\n  if (arrImgs.hits.length !== PER_PAGE) {\r\n    loadMoreBtn.style.display = 'none';\r\n  }\r\n\r\n  const markup = createMarkup(arrImgs);\r\n  gallery.insertAdjacentHTML('beforeend', markup);\r\n  simplelightbox.refresh();\r\n});\r\n\r\nfunction createMarkup(arrImgs) {\r\n  if (arrImgs.hits.length) {\r\n    return arrImgs.hits\r\n      .map(\r\n        img => `\r\n            <a href=${img.largeImageURL}>\r\n                <div class=\"photo-card\">\r\n                    <img class=\"image\" src=${img.webformatURL} alt=${img.tags} loading=\"lazy\" />\r\n                        <div class=\"info\">\r\n                            <p class=\"info-item\">\r\n                                Likes\r\n                                <b>${img.likes}</b>\r\n                            </p>\r\n                            <p class=\"info-item\">\r\n                                Views\r\n                                <b>${img.views}</b>\r\n                            </p>\r\n                            <p class=\"info-item\">\r\n                                Comments\r\n                                <b>${img.comments}</b>\r\n                            </p>\r\n                            <p class=\"info-item\">\r\n                                Downloads\r\n                                <b>${img.downloads}</b>\r\n                            </p>\r\n                        </div>\r\n                </div>  \r\n            </a>\r\n  `\r\n      )\r\n      .join('');\r\n  }\r\n}\r\n"],"names":["axios","KEY","PER_PAGE","searchImg","query","page","data","form","input","gallery","loadMoreBtn","simplelightbox","SimpleLightbox","warningMessage","e","arrImgs","iziToast","markup","createMarkup","img"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,2BACzB,MAAMC,EAAM,qCACCC,EAAW,GAEXC,EAAY,CAACC,EAAOC,IAC/BL,EACG,IACC,QAAQC,OAASG,kEAAsEC,cAAiBH,GACzG,EACA,KAAKI,GAAQA,EAAK,IAAI,ECLrBC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,sBAAsB,EACrDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EAEvDA,EAAY,MAAM,QAAU,OAC5B,MAAMC,EAAiB,IAAIC,EAAe,YAAY,EAEtD,IAAIP,EAAO,EACX,MAAMQ,EAAiB,CACrB,QACE,2EACF,MAAO,MACP,SAAU,QACZ,EAEAN,EAAK,iBAAiB,SAAU,MAAMO,GAAK,CACzCA,EAAE,eAAc,EAChBL,EAAQ,UAAY,GACpBJ,GAAQ,EACR,MAAMU,EAAU,MAAMZ,EAAUK,EAAM,MAAOH,CAAI,EAEjD,GAAKU,EAAQ,KAAK,OAIhBC,EAAS,KAAK,CACZ,QAAS,oBAAoBD,EAAQ,oBACrC,SAAU,WACV,MAAO,OACb,CAAK,MARuB,CACxBC,EAAS,KAAKH,CAAc,EAC5B,MACJ,CAQME,EAAQ,KAAK,SAAWb,EAC1BQ,EAAY,MAAM,QAAU,QACvBA,EAAY,MAAM,QAAU,OAEnC,MAAMO,EAASC,EAAaH,CAAO,EACnCN,EAAQ,mBAAmB,YAAaQ,CAAM,EAC9CN,EAAe,QAAO,CACxB,CAAC,EAEDH,EAAM,iBAAiB,QAAS,IAAM,CACpCH,EAAO,CACT,CAAC,EAEDK,EAAY,iBAAiB,QAAS,SAAY,CAChDL,GAAQ,EACR,MAAMU,EAAU,MAAMZ,EAAUK,EAAM,MAAOH,CAAI,EAE7CU,EAAQ,KAAK,SAAWb,IAC1BQ,EAAY,MAAM,QAAU,QAG9B,MAAMO,EAASC,EAAaH,CAAO,EACnCN,EAAQ,mBAAmB,YAAaQ,CAAM,EAC9CN,EAAe,QAAO,CACxB,CAAC,EAED,SAASO,EAAaH,EAAS,CAC7B,GAAIA,EAAQ,KAAK,OACf,OAAOA,EAAQ,KACZ,IACCI,GAAO;AAAA,sBACOA,EAAI;AAAA;AAAA,6CAEmBA,EAAI,oBAAoBA,EAAI;AAAA;AAAA;AAAA;AAAA,qCAIpCA,EAAI;AAAA;AAAA;AAAA;AAAA,qCAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,qCAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,qCAIJA,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA,GAMlC,EACA,KAAK,EAAE,CAEd"}