{"version":3,"file":"commonHelpers.js","sources":["../src/js/api.js","../src/js/main.js"],"sourcesContent":["import axios from 'axios';\r\n\r\naxios.defaults.baseURL = 'https://pixabay.com/api/';\r\nconst KEY = '41181401-cfbb9dc400356a899a7dc1037';\r\nexport const PER_PAGE = 40;\r\n\r\nexport const searchImg = async (query, page) => {\r\n  try {\r\n    const res = await axios.get(\r\n      `?key=${KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${PER_PAGE}`\r\n    );\r\n    return res.data;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\nimport { PER_PAGE, searchImg } from './api';\r\nconst form = document.querySelector('.search-form');\r\nconst input = document.querySelector('[name=\"searchQuery\"]');\r\nconst gallery = document.querySelector('.gallery');\r\nconst loadMoreBtn = document.querySelector('.load-more');\r\n\r\nloadMoreBtn.style.display = 'none';\r\nconst simplelightbox = new SimpleLightbox('.gallery a');\r\n\r\nlet page = 0;\r\nconst warningMessage = {\r\n  message:\r\n    'Sorry, there are no images matching your search query. Please try again.',\r\n  color: 'red',\r\n  position: 'center',\r\n};\r\n\r\nform.addEventListener('submit', async e => {\r\n  e.preventDefault();\r\n  loadMoreBtn.style.display = 'none';\r\n  const value = input.value.trim();\r\n\r\n  if (!value) {\r\n    iziToast.show({ ...warningMessage, message: 'Enter word for search' });\r\n    input.value = '';\r\n    return;\r\n  }\r\n\r\n  gallery.innerHTML = '';\r\n  page += 1;\r\n\r\n  try {\r\n    const arrImgs = await searchImg(value, page);\r\n\r\n    if (!arrImgs.hits.length) {\r\n      iziToast.show(warningMessage);\r\n      return;\r\n    } else {\r\n      iziToast.show({\r\n        message: `Hooray! We found ${arrImgs.totalHits} images.`,\r\n        position: 'topRight',\r\n        color: 'green',\r\n      });\r\n    }\r\n\r\n    if (arrImgs.hits.length === PER_PAGE) {\r\n      loadMoreBtn.style.display = 'block';\r\n    } else {\r\n      iziToast.show({\r\n        message: \"We're sorry, but you've reached the end of search results.\",\r\n        position: 'topRight',\r\n        color: 'green',\r\n      });\r\n      loadMoreBtn.style.display = 'none';\r\n    }\r\n\r\n    const markup = createMarkup(arrImgs);\r\n    gallery.insertAdjacentHTML('beforeend', markup);\r\n    simplelightbox.refresh();\r\n  } catch (error) {}\r\n});\r\n\r\ninput.addEventListener('input', () => {\r\n  page = 0;\r\n});\r\n\r\nloadMoreBtn.addEventListener('click', async () => {\r\n  page += 1;\r\n  try {\r\n    const arrImgs = await searchImg(input.value.trim(), page);\r\n    if (arrImgs.hits.length !== PER_PAGE) {\r\n      loadMoreBtn.style.display = 'none';\r\n      iziToast.show({\r\n        message: \"We're sorry, but you've reached the end of search results.\",\r\n        position: 'topRight',\r\n        color: 'green',\r\n      });\r\n    }\r\n\r\n    const markup = createMarkup(arrImgs);\r\n    gallery.insertAdjacentHTML('beforeend', markup);\r\n    simplelightbox.refresh();\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n});\r\n\r\nfunction createMarkup(arrImgs) {\r\n  if (arrImgs.hits.length) {\r\n    return arrImgs.hits\r\n      .map(\r\n        img => `\r\n            <a href=${img.largeImageURL}>\r\n                <div class=\"photo-card\">\r\n                    <img class=\"image\" src=${img.webformatURL} alt=${img.tags} loading=\"lazy\" />\r\n                        <div class=\"info\">\r\n                            <p class=\"info-item\">\r\n                                Likes\r\n                                <b>${img.likes}</b>\r\n                            </p>\r\n                            <p class=\"info-item\">\r\n                                Views\r\n                                <b>${img.views}</b>\r\n                            </p>\r\n                            <p class=\"info-item\">\r\n                                Comments\r\n                                <b>${img.comments}</b>\r\n                            </p>\r\n                            <p class=\"info-item\">\r\n                                Downloads\r\n                                <b>${img.downloads}</b>\r\n                            </p>\r\n                        </div>\r\n                </div>  \r\n            </a>\r\n  `\r\n      )\r\n      .join('');\r\n  }\r\n}\r\n"],"names":["axios","KEY","PER_PAGE","searchImg","query","page","error","form","input","gallery","loadMoreBtn","simplelightbox","SimpleLightbox","warningMessage","e","value","iziToast","arrImgs","markup","createMarkup","img"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,2BACzB,MAAMC,EAAM,qCACCC,EAAW,GAEXC,EAAY,MAAOC,EAAOC,IAAS,CAC9C,GAAI,CAIF,OAHY,MAAML,EAAM,IACtB,QAAQC,OAASG,kEAAsEC,cAAiBH,GAC9G,GACe,IACZ,OAAQI,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,ECTMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,sBAAsB,EACrDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EAEvDA,EAAY,MAAM,QAAU,OAC5B,MAAMC,EAAiB,IAAIC,EAAe,YAAY,EAEtD,IAAIP,EAAO,EACX,MAAMQ,EAAiB,CACrB,QACE,2EACF,MAAO,MACP,SAAU,QACZ,EAEAN,EAAK,iBAAiB,SAAU,MAAMO,GAAK,CACzCA,EAAE,eAAc,EAChBJ,EAAY,MAAM,QAAU,OAC5B,MAAMK,EAAQP,EAAM,MAAM,KAAI,EAE9B,GAAI,CAACO,EAAO,CACVC,EAAS,KAAK,CAAE,GAAGH,EAAgB,QAAS,uBAAuB,CAAE,EACrEL,EAAM,MAAQ,GACd,MACD,CAEDC,EAAQ,UAAY,GACpBJ,GAAQ,EAER,GAAI,CACF,MAAMY,EAAU,MAAMd,EAAUY,EAAOV,CAAI,EAE3C,GAAKY,EAAQ,KAAK,OAIhBD,EAAS,KAAK,CACZ,QAAS,oBAAoBC,EAAQ,oBACrC,SAAU,WACV,MAAO,OACf,CAAO,MARuB,CACxBD,EAAS,KAAKH,CAAc,EAC5B,MACN,CAQQI,EAAQ,KAAK,SAAWf,EAC1BQ,EAAY,MAAM,QAAU,SAE5BM,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,WACV,MAAO,OACf,CAAO,EACDN,EAAY,MAAM,QAAU,QAG9B,MAAMQ,EAASC,EAAaF,CAAO,EACnCR,EAAQ,mBAAmB,YAAaS,CAAM,EAC9CP,EAAe,QAAO,CAC1B,MAAI,CAAgB,CACpB,CAAC,EAEDH,EAAM,iBAAiB,QAAS,IAAM,CACpCH,EAAO,CACT,CAAC,EAEDK,EAAY,iBAAiB,QAAS,SAAY,CAChDL,GAAQ,EACR,GAAI,CACF,MAAMY,EAAU,MAAMd,EAAUK,EAAM,MAAM,KAAI,EAAIH,CAAI,EACpDY,EAAQ,KAAK,SAAWf,IAC1BQ,EAAY,MAAM,QAAU,OAC5BM,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,WACV,MAAO,OACf,CAAO,GAGH,MAAME,EAASC,EAAaF,CAAO,EACnCR,EAAQ,mBAAmB,YAAaS,CAAM,EAC9CP,EAAe,QAAO,CACvB,OAAQL,EAAP,CACA,QAAQ,IAAIA,CAAK,CAClB,CACH,CAAC,EAED,SAASa,EAAaF,EAAS,CAC7B,GAAIA,EAAQ,KAAK,OACf,OAAOA,EAAQ,KACZ,IACCG,GAAO;AAAA,sBACOA,EAAI;AAAA;AAAA,6CAEmBA,EAAI,oBAAoBA,EAAI;AAAA;AAAA;AAAA;AAAA,qCAIpCA,EAAI;AAAA;AAAA;AAAA;AAAA,qCAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,qCAIJA,EAAI;AAAA;AAAA;AAAA;AAAA,qCAIJA,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA,GAMlC,EACA,KAAK,EAAE,CAEd"}